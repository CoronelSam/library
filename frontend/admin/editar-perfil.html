<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Editar Perfil - Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background-color: #f0f2f5; }
    .navbar { background-color: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .navbar-brand { font-weight: 600; color: #343a40 !important; }
    .nav-link { color: #555 !important; }
    .nav-link.active { font-weight: 600; color: #0d6efd !important; }
    .form-container { max-width: 520px; margin: 2rem auto; }
    .card { border: none; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
  </style>
  <!-- Nota: El control de acceso se maneja con adminAuth.js -->
  <!-- Opcional: puedes agregar favicon u otras metas aquí -->
  <link rel="icon" href="data:,">
  <meta name="robots" content="noindex,nofollow">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<!-- Navbar Admin -->
<nav class="navbar navbar-expand-lg sticky-top">
  <div class="container">
    <a class="navbar-brand" href="admin.html"><i class="bi bi-shield-lock-fill me-2"></i>Admin Biblioteca</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="admin.html"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="agregar.html"><i class="bi bi-plus-circle"></i> Agregar Libro</a></li>
        <li class="nav-item"><a class="nav-link" href="editar.html"><i class="bi bi-pencil-square"></i> Editar/Eliminar</a></li>
        <li class="nav-item"><a class="nav-link" href="gestion-usuarios.html"><i class="bi bi-people"></i> Usuarios</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle me-1"></i><span id="nombreUsuario">Usuario</span>
            <span id="rolBadge" class="badge bg-secondary ms-1">Rol</span>
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item active" href="editar-perfil.html">
              <i class="bi bi-person-gear me-2"></i>Perfil
            </a></li>
            <li><a class="dropdown-item text-danger" href="#" onclick="logout()">
              <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión
            </a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
 </nav>

<div class="container form-container">
  <div class="card">
    <div class="card-body p-4">
      <h3 class="fw-bold mb-3"><i class="bi bi-person-gear text-primary me-2"></i>Editar Perfil</h3>
      <p class="text-muted small">Modifica tus datos. Solo llena los campos que deseas cambiar.</p>
      <form id="formEditarCuenta" novalidate>
        <div class="mb-3">
          <label class="form-label">Usuario Actual</label>
          <input id="usuarioActual" type="text" class="form-control" disabled>
        </div>
        <div class="mb-3">
          <label class="form-label">Nuevo Usuario</label>
          <input id="nuevoUsuario" type="text" class="form-control" placeholder="Opcional">
          <div class="form-text">Entre 5 y 50 caracteres alfanuméricos.</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Email Actual</label>
          <input id="emailActual" type="email" class="form-control" disabled>
        </div>
        <div class="mb-3">
          <label class="form-label">Nuevo Email</label>
          <input id="nuevoEmail" type="email" class="form-control" placeholder="Opcional">
        </div>
        <hr>
        <div class="mb-3">
          <label class="form-label">Contraseña Actual</label>
          <input id="claveActual" type="password" class="form-control" placeholder="Requerida para cambiar contraseña">
          <div class="form-text">Ingresa tu contraseña actual solo si deseas cambiarla.</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Nueva Contraseña</label>
          <input id="nuevaClave" type="password" class="form-control" placeholder="Opcional">
          <div class="form-text">Mínimo 8 caracteres, incluir mayúscula, minúscula, número y símbolo.</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Confirmar Contraseña</label>
          <input id="confirmarClave" type="password" class="form-control" placeholder="Repite nueva contraseña">
        </div>
        <div id="mensajeEstado" class="mb-3 small"></div>
        <button class="btn btn-primary w-100" type="submit"><i class="bi bi-save me-2"></i>Guardar Cambios</button>
      </form>
    </div>
  </div>
</div>

<footer class="footer text-center">
  <div class="container">
    <p class="mb-0">Derechos reservados © 2025</p>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/adminAuth.js"></script>
<script src="../js/config/constants.js"></script>
<script src="../js/config/api.js"></script>
<script src="../js/services/authService.js"></script>
<script src="../js/utils/userAccountValidation.js"></script>
<script src="../js/utils/ui.js"></script>
<script src="../js/utils/passwordToggle.js"></script>
<script src="js/editarPerfil.js"></script>
</body>
</html>
